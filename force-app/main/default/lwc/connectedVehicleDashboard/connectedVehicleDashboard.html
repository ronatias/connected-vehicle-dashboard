<template>
    <lightning-card title="Connected Vehicle Dashboard" icon-name="standard:account">
      <!-- Header: counts + actions -->
      <div class="slds-p-horizontal_small slds-p-vertical_x-small slds-grid slds-grid_align-spread slds-wrap">
        <div class="slds-text-body_small">
          <span>Showing {loadedCount} of {totalCount}</span>
          <template if:true={cachedAt}>
            <span class="slds-m-left_small slds-text-color_weak">Cached: {cachedAt}</span>
          </template>
        </div>
  
        <div>
          <lightning-button
            variant="neutral"
            label="Refresh"
            class="slds-m-right_x-small"
            onclick={handleRefresh}
            disabled={disableRefresh}
          ></lightning-button>
  
          <lightning-button
            variant="brand"
            label="Load More"
            onclick={handleLoadMore}
            disabled={disableLoadMore}
          ></lightning-button>
        </div>
      </div>
  
      <!-- Data table + Spinner -->
      <div class="table-wrap slds-is-relative" aria-busy={showSpinner} aria-live="polite">
        <lightning-datatable
          key-field="vin"
          data={rows}
          columns={columns}
          hide-checkbox-column
          show-row-number-column
        ></lightning-datatable>
      
        <template if:true={showSpinner}>
            <div class="spinner-overlay spinner-top slds-is-absolute slds-text-align_center">
              <div class="spinner-anchor">
                <lightning-spinner
                  alternative-text="Loading vehicles"
                  size="medium"
                ></lightning-spinner>
                <div class="loading-text slds-m-top_small slds-text-body_small slds-text-title_bold">
                  {spinnerText}
                </div>
              </div>
            </div>
          </template>
      </div>
      
  
      <!-- Status messages -->
      <template if:true={noMoreData}>
        <div class="slds-p-around_small slds-text-body_small slds-text-color_weak">All vehicles loaded.</div>
      </template>
    </lightning-card>
  </template>
  